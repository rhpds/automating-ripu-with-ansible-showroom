= Workshop Exercise - Your Lab Environment

== Objectives

* Understand the lab topology and how to access the environment
* Understand how to perform the workshop exercises
* Understand challenge labs

== Guide

=== Your Lab Environment

The workshop is provisioned with a pre-configured lab environment. You
will have access to a host deployed with Ansible Automation Platform
(AAP) which you will use to control the playbook and workflow jobs that
automate the RHEL in-place upgrade workflow steps. You will also have
access to some ''pet'' application hosts, with RHEL 7, 8, and 9.
 These are the hosts where we will be upgrading the RHEL
operating system (OS) to the next major version.

[cols=",",options="header",]
|===
|Role |Inventory name
|AAP Control Host |ansible-1
|RHEL7 pet app host 1 |rhel7
|RHEL8 pet app host 1 |rhel8
|RHEL9 pet app host 1 |rhel9
|===

[#step-1-access-the-environment]
=== Step 1 - Access the Environment

We will use Visual Studio Code (VS Code) as it provides a convenient and
intuitive way to use a web browser to edit files and access terminal
sessions. If you are a command line hero, direct SSH access is available
if VS Code is not to your liking.

. You can open VS Code in your web browser using the ``Console URL``
link under ``Code-Server Console (Bastion)`` on the workshop launch page provided
by your instructor. The password is given below the link. For example:
+
image::vscode_link.png[Example link to VS Code WebUI]
. After opening the link, type in the provided password to access your
instance of VS Code.

____
*Note*

A welcome wizard may appear to guide you through configuring your VS
Code user experience. This is optional as the default settings will work
fine for this workshop. Feel free to step though the wizard to explore
the VS Code bells and whistles or you may just skip it.
____
[#step-2-open-a-terminal-session]
=== Step 2 - Open a Terminal Session

Terminal sessions provide access to the RHEL commands and utilities that
will help us understand what's going on ``behind the curtain`` when the
RHEL in-place upgrade automation is doing its thing.

. Use VS Code to open a terminal session. For example:
+
image::new_term.svg[Example of how to open a terminal session in VS Code]
. This terminal session will be running on the AAP control host
`ansible-1`. You can use the `ssh` command to login to one of your
pet app hosts. Finally, use the highlighted commands confirm the RHEL OS
version and kernel version installed.
+
For example:
+
image::ssh_login.png[Example ssh login to pet app host]


[#step-3-access-the-aap-web-ui]
=== Step 3 - Access the AAP Web UI

The AAP Web UI is where we will go to submit and check the status of the
Ansible playbook jobs we will use to automate the RHEL in-place upgrade
workflow.

. Letâ€™s open the AAP Web UI in a new web browser tab using the
``Console`` link under ``Red Hat Ansible Automation Controller`` on the
workshop launch page. For example:
+
image::aap_link.png[Example link to AAP Web UI]
. Enter the username `lab-user` and the password provided. This will bring
you to your AAP Web UI dashboard like the example below:
+
image::aap_console_example.png[Example AAP Web UI dashboard]
. We will learn more about how to use the AAP Web UI in the next
exercise.

[#step-4-access-the-rhel-web-console]
=== Step 4 - Access the RHEL Web Console

We will use the RHEL Web Console to review the results of the Leapp
pre-upgrade reports we generate for our pet app servers.

. Open a new web browser tab using the ``Console`` link under ``Cockpit``
Interactive Linux Server Admin Interface'' on the workshop launch page.
For example:
+
image::cockpit_link.png[Example link to RHEL Web Console]
. Enter the username `student` and the password provided. This will
bring you to a RHEL Web Console Overview page like the example below:
+
image::cockpit_example.png[Example RHEL Web Console]
. We will revisit the RHEL Web Console when we are ready to review our
pre-upgrade reports in an upcoming exercise.

[#step-5-configure-AAP]
=== Step 5 - Configure AAP

The first thing we need to do is to configure AAP with our content.  A pre-defined configuration as code job template is available to do this.

. Navigate to the AAP Web UI and go to the ``Templates`` tab inside Automation Execution (Automation Controller).  You should see a job template named ``Z / CaC / Controller``.  This is our pre-defined job template to configure AAP.  Click on the ``Launch`` button to run this job template.
+
image::initial_cac.png[Example of the initial CaC job template]
. The job template will configure AAP with our content and create the necessary job templates for the workshop exercises.  This may take a few minutes to complete.
. Once the job template has completed, navigate to the ``Templates`` tab again and you should see a list of job templates available for the workshop exercises.
+ 
image::completed_cac.png[AAP after running the CaC job template]

. After this, we now have AAP configured and ready to go for the workshop. To prepare our pet app servers for the lab exercise, we have a pre-defined playbook job template to run.
+
image::leapp_lab_init.png[Example of the Leapp lab init job template]
. Click on the ``Launch`` button to run the ``Ansible Leapp Lab Initialization`` job template. This job will prepare the servers with interesting challenges to address in the next steps of the workshop.

[#step-6-challenge-labs]
=== Step 6 - Challenge Labs

You will soon discover that many exercises in the workshop come with a
``Challenge Lab`` step. These labs are meant to give you a small task to
solve using what you have learned so far. The solution of the task is
shown underneath a warning sign.

== Conclusion

In this exercise, we learned about the lab environment we will be using
to continue through the workshop exercises. We verified that we are able
to use VS Code in our web browser and from there we can open terminal
sessions. We also made sure we are able to access the AAP Web UI which
will be the ``self-service portal`` we use to perform the next steps of
the RHEL in-place upgrade automation workflow. Finally, we connected to
the RHEL Web Console where we will soon be reviewing pre-upgrade
reports.

Use the link below to move on the next exercise.
